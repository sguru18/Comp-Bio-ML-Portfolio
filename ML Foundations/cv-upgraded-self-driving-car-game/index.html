<!DOCTYPE html>
<head>
    <title> JS Car Proj</title>
    <link rel ="stylesheet" href="src/assets/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
</head>
<body>
    <div id = "verticalButtons">
    <a href = "#home" class = "button" id = "button">How to <br>Play</a>
    <!-- <button id = "toggle" onclick="toggleTwoPlayerMode(this)">Toggle Two <br> Player Mode</button> -->
</div>

<div class ="popup">
    <div class = "popup-content">
        <h3>Welcome! Here's how the game works:</h3>
        <p2>- You and the computer both have 10 sets of random traffic obstacles to navigate, but your car
            is faster. 
            <br> - Steer the car by tilting two fists in the air like you're turning a steering wheel.
            <br> - You will lose if you crash into the road's borders or another car. 
            <br> - The game starts automatically when you start your webcam and it can find your two fists.</p2>
            <h3>Enjoy!</h3>
        <img src = "src/assets/close.png" alt = "Close" class = "close">
    </div>
</div>

    <canvas id = "carCanvas"></canvas>
    <div id = "verticalButtons">
        <button2 onclick="location.reload()">
            <img src="src/assets/refresh.png" alt="refresh" style="width: 24px; height: 24px;" />
        </button2>


        <!-- Used to train the model -->
        <!-- <button2 onclick="save()">
            <img src="src/assets/save.png" alt="save" style="width: 24px; height: 24px;" />
        </button2>
        <button2 onclick="discard()">
            <img src="src/assets/discard.png" alt="discard" style="width: 24px; height: 24px;" />
        </button2> -->

    </div>
    <canvas id = "networkCanvas"></canvas>

    <button2 id="startWebcam">
        <p> Start Webcam </p>
    </button2>
    <button2 id="stopWebcam">
        <p> Stop Webcam </p>
    </button2>

    <!-- <img id = "webcam" src = "" alt = "feed" style = "display: none; width: 320px; height: 240px;" /> -->

    <video class="webcam" style="display: none;"></video>
    <div id="verticalButtons">
    <canvas id="endgameText" width="480px" height="200px"></canvas>
    <canvas class="output_canvas" width="480px" height="320px"></canvas>
    </div>

    <div id = "verticalButtons">
        <button2 onclick="location.reload()">
            <img src="src/assets/refresh.png" alt="refresh" style="width: 24px; height: 24px;" />
        </button2>
    </div>
    <canvas id = "playerCanvas"></canvas>
    <canvas id = "player2Canvas"></canvas>
    <script type="module" src="src/main.js"></script>
    <script type="module">
        import {turnOnWebcam, stopWebcam} from "./src/utils/utils.js"

        document.getElementById("button").addEventListener("click", function(){
            document.querySelector(".popup").style.display = "flex";
        })

        document.querySelector(".close").addEventListener("click", function(){
            document.querySelector(".popup").style.display = "none";
        })

        document.getElementById("startWebcam").addEventListener("click", turnOnWebcam)
        document.getElementById("stopWebcam").addEventListener("click", stopWebcam)

        localStorage.setItem("readyToStartGame", JSON.stringify(false));


    </script>
</body>
</html>